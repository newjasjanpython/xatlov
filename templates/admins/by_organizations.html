{% extends 'admins/base.html' %}
{% load i18n %}

{% block title %}
	{% trans 'by organization' %}
{% endblock %}

{% block content %}
    <style>
        .hover-effect {
            border-radius: 14px;
            overflow: hidden;
            transition: 0.2s all;
        }

        .hover-effect:hover {
            background-color: var(--bg-color);
            color: white;
        }

        .hover-effect .card-body {
            position: relative;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        .hover-effect .card-body .count {
            position: absolute;
            top: 0;
            left: 0;
            display: block;
            color: white;
            padding: 26px;
            width: fit-content;
            font-size: 22px;
            background-color: var(--bg-color);
            border-radius: 0 0 22px 0;
        }
    </style>
    <div class="card">
        <div class="card-body p-3">
            <p>{% trans 'select to view organisation problems' %}</p>
            <form method="get" action="" class="w-100" id="organization-form">
                <select name="code_query" class="form-select" id="organization-select">
                    {% for value in codes %}
                    <option value="{{ value.code }}"{% if value.code == request.GET.code_query %}selected{% endif %}>{{ value.organisation }}</option>
                    {% endfor %}
                </select>
            </form>

            <script>
                document.getElementById('organization-select').addEventListener('change', () => {
                    document.getElementById('organization-form').submit();
                });
            </script>
        </div>
    </div>

    <div class="row g-3">
        <div class="col-lg-6 col-md-6 col-sm-12">
            <a class="card hover-effect" style="--bg-color: var(--bs-primary);" href="/admin/list-problems/?code={{ filter.code }}&filter=all">
                <div class="card-body p-3">
                    <span class="count">{{ filter.all.count }}</span>
                    <h1 class="m-0">{% trans 'all' %}</h1>
                </div>
            </a>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-12">
            <a class="card hover-effect" style="--bg-color: var(--bs-warning);" href="/admin/list-problems/?code={{ filter.code }}&filter=on-progress">
                <div class="card-body p-3">
                    <span class="count">{{ filter.on_progress.count }}</span>
                    <h1 class="m-0">{% trans 'on progress' %}</h1>
                </div>
            </a>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-12">
            <a class="card hover-effect" style="--bg-color: var(--bs-success);" href="/admin/list-problems/?code={{ filter.code }}&filter=finished">
                <div class="card-body p-3">
                    <span class="count">{{ filter.finished.count }}</span>
                    <h1 class="m-0">{% trans 'finished' %}</h1>
                </div>
            </a>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-12">
            <a class="card hover-effect" style="--bg-color: var(--bs-danger);" href="/admin/list-problems/?code={{ filter.code }}&filter=over-deadline">
                <div class="card-body p-3">
                    <span class="count">{{ filter.over_deadline.count }}</span>
                    <h1 class="m-0">{% trans 'over deadline' %}</h1>
                </div>
            </a>
        </div>
    </div>
{% endblock %}
